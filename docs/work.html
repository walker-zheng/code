
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>work · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="code.html" />
    
    
    <link rel="prev" href="todo.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="todo.html">
            
                <a href="todo.html">
            
                    
                    Todo
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="work.html">
            
                <a href="work.html">
            
                    
                    work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="code.html">
            
                <a href="code.html">
            
                    
                    code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="faq.html">
            
                <a href="faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="markdown.html">
            
                <a href="markdown.html">
            
                    
                    md语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="tu-jie.html">
            
                <a href="tu-jie.html">
            
                    
                    图解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="test.html">
            
                <a href="test.html">
            
                    
                    Gif测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="iptv.html">
            
                <a href="iptv.html">
            
                    
                    iptv
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="sourcetree.html">
            
                <a href="sourcetree.html">
            
                    
                    Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="gong-zuo-jie-tu.html">
            
                <a href="gong-zuo-jie-tu.html">
            
                    
                    工作截图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="pei-zhi.html">
            
                <a href="pei-zhi.html">
            
                    
                    配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="gong-ju.html">
            
                <a href="gong-ju.html">
            
                    
                    工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="yi-tian-xue-hui.html">
            
                <a href="yi-tian-xue-hui.html">
            
                    
                    一天学会
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="ji-hua.html">
            
                <a href="ji-hua.html">
            
                    
                    计划
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >work</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x547D;&#x4EE4;">&#x547D;&#x4EE4;</h1>
<h2 id="&#x65B0;&#x7248;&#x672C;&#x66F4;&#x65B0;&#x6CE8;&#x610F;">&#x65B0;&#x7248;&#x672C;&#x66F4;&#x65B0;&#x6CE8;&#x610F;</h2>
<ol>
<li>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#x53D8;&#x5316;&#xFF0C;&#x6D4B;&#x8BD5;&#x9700;&#x6839;&#x636E;&#x65E7;&#x914D;&#x7F6E;&#x4FEE;&#x6539;&#xFF0C;&#x89C1;&#x56FE;&#x7247;&#x6CE8;&#x91CA;</li>
<li>&#x5185;&#x63A7;&#x914D;&#x7F6E;&#x4E2D;json&#x5E93;&#x6539;&#x4E3A; jsonProvider2</li>
</ol>
<h2 id="&#x5339;&#x914D;&#x4E2D;&#x6587;">&#x5339;&#x914D;&#x4E2D;&#x6587;</h2>
<ul>
<li>[\u4e00-\u9fa5]</li>
<li>shell&#x5355;&#x884C;(&#x90E8;&#x5206;&#x9700;&#x8981;&#x7BA1;&#x7406;&#x5458;&#x6743;&#x9650;)</li>
</ul>
<h2 id="redis">redis</h2>
<ul>
<li>&#x67E5;&#x770B; &#x6838;&#x5FC3;&#x6570;&#x636E;&#x603B;&#x6570; &#x548C; &#x5DF2;&#x5B8C;&#x6210;&#x6570;<ul>
<li><code>for code in 0401 0501 0901 1502 1601 1602;do echo &quot;   &quot;$code&quot;:&quot;;redis-cli scard $code&quot;:data:done:&quot;;redis-cli scard $code&quot;:data:all:&quot;;done</code></li>
</ul>
</li>
<li>&#x7EDF;&#x8BA1; key &#x4E2A;&#x6570;<ul>
<li><code>time redis-cli keys *|sed &apos;s,:[^:]*$,:,&apos;|sort|uniq -c</code></li>
</ul>
</li>
<li>&#x7EDF;&#x8BA1; set &#x4E2A;&#x6570;<ul>
<li><code>redis-cli keys *|sed &apos;s,:[^:]*$,:,&apos;|sort|uniq -c|grep &apos;:data:&apos;|awk &apos;{print $2}&apos;|xargs -i redis-cli scard {}</code></li>
</ul>
</li>
</ul>
<h2 id="webapi-test">webapi test</h2>
<ul>
<li><code>curl -l -H &quot;Content-type: application/json&quot; -X POST -d @./json_body.json http://192.168.1.31:8080/iics/service/rest/alarm/uploadFailedNotifyResult</code></li>
</ul>
<h2 id="&#x751F;&#x6210;-emoji-list">&#x751F;&#x6210; emoji list</h2>
<ul>
<li><code>echo &quot;### gogs emoji list&quot; &gt;README.md</code></li>
<li><code>LINE=&quot;&quot;;COUNT=0;ls gogs/img/emoji/*|sed &apos;s/gogs\/img\/emoji\/\(.*\)\.\(.*\)/![\1](gogs\/img\/emoji\/\1.\2) :\1:/&apos;|while read line;do (( COUNT+=1 )); (( ! (COUNT % 8) )) &amp;&amp; { echo &quot; - $LINE&quot; ; LINE=&quot;&quot;; } || { LINE=&quot;$LINE $line&quot;; };done &gt;&gt; README.md</code></li>
</ul>
<h2 id="kill&#x8FDB;&#x7A0B;">kill&#x8FDB;&#x7A0B;</h2>
<ul>
<li><code>eval $(tasklist.exe |grep -ia er64.exe|awk &apos;{print &quot;-PID &quot;$2}&apos;|tr &quot;\n&quot; &quot; &quot; |xargs.exe -i echo {}|sed &apos;s/^/taskkill /&apos;)</code></li>
<li><code>eval $(tasklist.exe |grep -ia er64.exe|grep analyseServer|awk &apos;{print &quot;-PID &quot;$2}&apos;|tr &quot;\n&quot; &quot; &quot; |xargs.exe -i echo {}|sed &apos;s/^/taskkill /&apos;)</code></li>
</ul>
<h2 id="&#x5378;&#x8F7D;&#x5E76;&#x5B89;&#x88C5;">&#x5378;&#x8F7D;&#x5E76;&#x5B89;&#x88C5;</h2>
<ul>
<li><code>msiexec.exe -q -x $(reg query &quot;HKLM\SOFTWARE\Inforun\analyseServer&quot;|grep ProductCode|awk &apos;{print $3}&apos;) ; (cd /e/zmy/analyseServer/analyseServer/Release/msi &amp;&amp; ls -t *.msi|sed -n &apos;1p&apos;|xargs -i msiexec.exe -q -i {})</code></li>
</ul>
<h2 id="&#x542F;&#x52A8;&#x7A0B;&#x5E8F;">&#x542F;&#x52A8;&#x7A0B;&#x5E8F;</h2>
<ul>
<li><code>eval $(find . -name &apos;*64.exe&apos;|grep vaS|sed &apos;s#/vaS.*##g;s#\./#/#g;s#^#(cd /e/zmy/analyseServer/analyseServer/analyseServer/tools#g;s#$# \&amp;\&amp; ./vaServer64.exe \&amp; &gt;\&amp; /dev/null)#&apos;|tr &quot;\n&quot; &quot; &quot;|sed &apos;s#) (#) \&amp;\&amp; (#g&apos;)</code></li>
<li><code>eval $(find . -name &apos;*64.exe&apos;|grep analy|sed &apos;s#/ana.*##g;s#\./#/#g;s#^#(cd /e/zmy/analyseServer/analyseServer/analyseServer/tools#g;s#$# \&amp;\&amp; ./analyseServer64.exe \&amp; &gt;\&amp; /dev/null)#&apos;|tr &quot;\n&quot; &quot; &quot;|sed &apos;s#) (#) \&amp;\&amp; (#g&apos;)</code></li>
</ul>
<h2 id="sftp&#x540C;&#x6B65;&#x6700;&#x65B0;&#x6587;&#x4EF6;">sftp&#x540C;&#x6B65;&#x6700;&#x65B0;&#x6587;&#x4EF6;</h2>
<ul>
<li><code>(echo &quot;cd /d/ftpInforun/businessData&quot;;echo &quot;ls -lt&quot;)|sftp -b - cs@192.168.1.100 |grep -v &apos;sftp&gt;&apos;|head -1|sed &apos;s/.* //g;s#^#cd /d/ftpInforun/businessData\nget #g&apos;|sftp -b - cs@192.168.1.100</code></li>
</ul>
<h2 id="rsync">rsync</h2>
<h3 id="&#x8FDC;&#x7A0B;&#x5230;&#x672C;&#x5730;">&#x8FDC;&#x7A0B;&#x5230;&#x672C;&#x5730;</h3>
<ul>
<li><code>rsync -ravzP -e ssh cs@inforun:/home/cs/test/ test</code></li>
<li><code>rsync -ravzP -e &apos;ssh -p 2222&apos; cs@inforun:/home/cs/test/ test</code></li>
</ul>
<h3 id="&#x672C;&#x5730;&#x5230;&#x8FDC;&#x7A0B;">&#x672C;&#x5730;&#x5230;&#x8FDC;&#x7A0B;</h3>
<ul>
<li><code>rsync -ravzP -e ssh test cs@inforun:/home/cs/test/</code></li>
<li><code>rsync -ravzP -e &apos;ssh -p 2222&apos; test cs@inforun:/home/cs/test/</code></li>
</ul>
<h2 id="tcp&#x6D88;&#x606F;&#x53D1;&#x9001;">tcp&#x6D88;&#x606F;&#x53D1;&#x9001;</h2>
<ul>
<li><code>echo &apos;{&quot;messageType&quot;:222}&apos;|nc 127.0.0.1 7901;echo &apos;{&quot;messageType&quot;:222}&apos;|nc 127.0.0.1 7902;echo &apos;{&quot;messageType&quot;:222}&apos;|nc 127.0.0.1 7903;echo &apos;{&quot;messageType&quot;:222}&apos;|nc 127.0.0.1 7904;echo &apos;{&quot;messageType&quot;:222}&apos;|nc 127.0.0.1 7905;echo &apos;{&quot;messageType&quot;:222}&apos;|nc 127.0.0.1 7906</code></li>
<li><code>echo &apos;{&quot;messageType&quot;:222}&apos;|socat - TCP:localhost:7901 &amp;&amp; echo &apos;{&quot;messageType&quot;:222}&apos;|socat - TCP:localhost:7902 &amp;&amp; echo &apos;{&quot;messageType&quot;:222}&apos;|socat - TCP:localhost:7903 &amp;&amp; echo &apos;{&quot;messageType&quot;:222}&apos;|socat - TCP:localhost:7904 &amp;&amp; echo &apos;{&quot;messageType&quot;:222}&apos;|socat - TCP:localhost:7905 &amp;&amp; echo &apos;{&quot;messageType&quot;:222}&apos;|socat - TCP:localhost:7906</code></li>
</ul>
<h2 id="&#x683C;&#x5F0F;&#x5316;&#x6253;&#x5370;">&#x683C;&#x5F0F;&#x5316;&#x6253;&#x5370;</h2>
<ul>
<li><code>cat /c/Users/walker/Desktop/1.txt|while read line;do echo $line|sed &apos;s/&#x3001;/\n/g&apos;|awk &apos;{printf &quot;%04d\n&quot;, $1}&apos;|sort -n|uniq|tr &quot;\n&quot; &quot; &quot;;echo;done</code></li>
<li><code>cat /e/zmy/analyseServer/analyseServer/analyseServer/riskpoint.xml|grep trans|sed &apos;s#&lt;/.*##;s#.*&gt;##&apos;|while read line; do echo $line|sed &apos;s/,/ /g&apos;; done |tr &quot; &quot; &quot;\n&quot;|sort -n|uniq -c|sort -n</code></li>
</ul>
<h2 id="&#x6D88;&#x606F;&#x7EDF;&#x8BA1;">&#x6D88;&#x606F;&#x7EDF;&#x8BA1;</h2>
<ul>
<li><code>ls /d/log/*.va.log|while read line; do echo $line|grep .;grep -E &apos;&#x6D88;&#x606F; [&#x53D1;&#x9001;|&#x89E3;&#x6790;]&apos; $line|awk -F# &apos;{print $2}&apos;|sed &apos;s/].*//g&apos;|sort|uniq -c; done</code></li>
</ul>
<h2 id="&#x8BA1;&#x7B97;-&#x603B;&#x6570;">&#x8BA1;&#x7B97; &#x603B;&#x6570;</h2>
<ul>
<li><code>grep &#x6838;&#x5FC3;&#x6570;&#x636E;&#x603B;&#x6570; /d/log/log.rg.log|awk -F# &apos;{print $2}&apos;|awk &apos;{print $1}&apos;|tr &quot;\n&quot; &quot;+&quot;|sed &apos;s/+$/\n/&apos;|bc</code></li>
</ul>
<h2 id="&#x5220;&#x6389;&#x5F69;&#x8272;">&#x5220;&#x6389;&#x5F69;&#x8272;</h2>
<ul>
<li><code>sed -r &quot;s/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]//g&quot;</code></li>
<li><code>sed &quot;s,\x1B\[[0-9;]*[a-zA-Z],,g&quot;</code></li>
</ul>
<h2 id="&#x67E5;&#x770B;&#x7528;&#x7684;&#x6700;&#x591A;&#x7684;&#x547D;&#x4EE4;">&#x67E5;&#x770B;&#x7528;&#x7684;&#x6700;&#x591A;&#x7684;&#x547D;&#x4EE4;</h2>
<ul>
<li><code>history |awk &apos;{print $2}&apos;|sort|uniq -c|sort -rn|head -10</code></li>
</ul>
<h2 id="&#x884C;&#x5217;&#x8F6C;&#x6362;">&#x884C;&#x5217;&#x8F6C;&#x6362;</h2>
<ul>
<li><code>awk -F &quot; +&quot; &apos;{for(i=1;i&lt;=NF;i++) a[i,NR]=$i}END{for(i=1;i&lt;=NF;i++) {for(j=1;j&lt;=NR;j++) printf a[i,j] &quot; &quot;;print &quot;&quot;}}&apos; urfile</code></li>
</ul>
<h2 id="&#x8BA1;&#x65F6;">&#x8BA1;&#x65F6;</h2>
<ul>
<li><code>while true; do END=$(date +%s --date=&apos;17:30:00&apos;); echo &quot;&#x79BB;17:30&#x8FD8;&#x6709;[&quot;$(( $END - $(date +%s) ))&quot;]&#x79D2;&quot;;sleep 1;done</code></li>
<li><code>COUNT=0; while true;do echo $(( COUNT+=1 )) $(date +%T);sleep 30;done</code></li>
</ul>
<h1 id="&#x7EDF;&#x8BA1;">&#x7EDF;&#x8BA1;</h1>
<h2 id="&#x62A5;&#x8B66;&#x5931;&#x8D25;-&#x4E0E;-&#x6838;&#x5FC3;&#x6570;&#x636E;-&#x5BF9;&#x6BD4;">&#x62A5;&#x8B66;+&#x5931;&#x8D25; &#x4E0E; &#x6838;&#x5FC3;&#x6570;&#x636E; &#x5BF9;&#x6BD4;</h2>
<ul>
<li><code>comm -3 &lt;(grep &apos;&quot;bussinessCoreId&quot;: &apos; ./log.rg.log|grep -v &apos;&quot;bussinessCoreId&quot;: 0,&apos;|sed &apos;s/.*bussinessCoreId&quot;: //g;s/,//g&apos;|sort|uniq) &lt;(grep businessList ./log.rg.log|sed &apos;s/,/\n/g&apos;|grep &apos;bussinessId&apos;|sed &apos;s/.*&quot;bussinessId&quot;://g&apos;|sort|uniq)</code></li>
</ul>
<h2 id="&#x62A5;&#x8B66;-&#x4E0E;-&#x6838;&#x5FC3;&#x6570;&#x636E;-&#x5BF9;&#x6BD4;">&#x62A5;&#x8B66; &#x4E0E; &#x6838;&#x5FC3;&#x6570;&#x636E; &#x5BF9;&#x6BD4;</h2>
<ul>
<li><code>comm -3 &lt;(grep -n &apos;&#x6570;&#x636E;&#x4E0A;&#x4F20; .*Alarm&apos; ./log.rg.log|awk -F: &apos;{print $1}&apos;|sed &apos;s/\(.*\)/\1+5/g&apos;|bc|tr &quot;\n&quot; &quot; &quot;|sed &apos;s/ /p;/g&apos;|sed &apos;s/;$//&apos;|xargs.exe -i sed -n &apos;&apos;{}&apos;&apos; ./log.rg.log |grep -v &apos;&quot;bussinessCoreId&quot;: 0,&apos;|sed &apos;s/.*&quot;bussinessCoreId&quot;: //;s/,//g&apos;|sort|uniq) &lt;(grep businessList ./log.rg.log|sed &apos;s/,/\n/g&apos;|grep &apos;bussinessId&apos;|sed &apos;s/.*&quot;bussinessId&quot;://g&apos;|sort|uniq)</code></li>
</ul>
<h2 id="&#x662F;&#x5426;&#x521B;&#x5EFA;&#x4EFB;&#x52A1;">&#x662F;&#x5426;&#x521B;&#x5EFA;&#x4EFB;&#x52A1;</h2>
<ul>
<li><code>echo &apos;5912377&apos;|tr &quot;\n&quot; &quot;|&quot;|sed &apos;s/|$//&apos;|xargs.exe -i grep --color -E &apos;&apos;{}&apos;&apos; &lt;(grep &apos;&#x4EFB;&#x52A1; &#x521B;&#x5EFA;&apos; log.rg.log)|wc -l</code></li>
</ul>
<h2 id="&#x83B7;&#x53D6;&#x5931;&#x8D25;&#x4E0A;&#x4F20;&#x884C;&#x53F7;">&#x83B7;&#x53D6;&#x5931;&#x8D25;&#x4E0A;&#x4F20;&#x884C;&#x53F7;</h2>
<ul>
<li><code>grep -n &apos;&#x6570;&#x636E;&#x4E0A;&#x4F20; FailedNotify&apos; ./log.rg.log</code></li>
</ul>
<h2 id="&#x5931;&#x8D25;&#x4EFB;&#x52A1;&#x662F;&#x5426;&#x6700;&#x540E;&#x5206;&#x6790;&#x6210;&#x529F;">&#x5931;&#x8D25;&#x4EFB;&#x52A1;&#x662F;&#x5426;&#x6700;&#x540E;&#x5206;&#x6790;&#x6210;&#x529F;</h2>
<ul>
<li><code>grep -n &apos;&#x6570;&#x636E;&#x4E0A;&#x4F20; .*Alarm&apos; ./log.rg.log|awk -F: &apos;{print $1}&apos;|sed &apos;s/\(.*\)/\1+5/g&apos;|bc|sort|uniq|xargs.exe -i sed -n &apos;&apos;{}&apos;p&apos; ./log.rg.log|sed &apos;s/.*&quot;bussinessCoreId&quot;: //;s/,//g&apos;</code></li>
<li><code>grep -n &apos;&#x6570;&#x636E;&#x4E0A;&#x4F20; FailedNotify&apos; ./log.rg.log|awk -F: &apos;{print $1}&apos;|sed &apos;s/\(.*\)/\1+2/g&apos;|bc|sort|uniq|xargs.exe -i sed -n &apos;&apos;{}&apos;p&apos; ./log.rg.log|sed &apos;s/.*&quot;bussinessCoreId&quot;: //;s/,//g&apos;</code></li>
</ul>
<h2 id="&#x65B0;&#x589E;&#x62A5;&#x8B66;&#x6210;&#x529F;&#x6570;">&#x65B0;&#x589E;&#x62A5;&#x8B66;&#x6210;&#x529F;&#x6570;</h2>
<ul>
<li><code>count=0;stat=0;while true ; do  (( count++ )); last=$stat;echo -e &quot;&#x6570;&#x636E;&#x4E0A;&#x4F20;\n&quot;|grep . --color; stat=$(grep -c &#x6570;&#x636E;&#x4E0A;&#x4F20; /d/log/*.rg.log|tr &quot;\n&quot; &quot;:&quot;|sed &apos;s/[^:]*log:/+/g;s/^+//;s/://g;&apos;|xargs.exe -i echo &apos;({})&apos;|bc); echo $last $stat $(( $stat-$last ))&quot; &quot;$count;echo &apos;sleep for 3 sec&apos;;sleep 3; done</code></li>
</ul>
<h1 id="sql&#x547D;&#x4EE4;">SQL&#x547D;&#x4EE4;</h1>
<h2 id="&#x6838;&#x5FC3;&#x6570;&#x636E;-&#x6E05;&#x7406;">&#x6838;&#x5FC3;&#x6570;&#x636E; &#x6E05;&#x7406;</h2>
<ul>
<li><p><code>delete t_business_data t where t.create_time like &apos;2017-08-02%&apos;;</code></p>
<h2 id="&#x66F4;&#x65B0;&#x4E0A;&#x4E0B;&#x73ED;&#x65F6;&#x95F4;2min">&#x66F4;&#x65B0;&#x4E0A;&#x4E0B;&#x73ED;&#x65F6;&#x95F4;(2min)</h2>
<ul>
<li>dev321<ul>
<li><code>update t_work_time twt set twt.begin_date=sysdate,twt.end_date= sysdate+2,twt.work_begin_time=to_char(sysdate+2/24/60,&apos;hh24:mi&apos;),twt.work_end_time=to_char(sysdate+12/24/60,&apos;hh24:mi&apos;),twt.rest_starttime =to_char(sysdate+5/24/60,&apos;hh24:mi&apos;),twt.rest_endtime =to_char(sysdate+10/24/60,&apos;hh24:mi&apos;)  where twt.bank_id in (select twt.bank_id from t_work_time twt left join t_bank tb on twt.bank_id = tb.id where tb.bank_code in (&apos;0501&apos;, &apos;0901&apos;, &apos;0401&apos;, &apos;1602&apos;, &apos;1502&apos;, &apos;1601&apos;));</code></li>
<li><code>select * from t_work_time  twt  left join t_bank tb on twt.bank_id=tb.id  where tb.bank_code in (&apos;0501&apos;,&apos;0901&apos;,&apos;0401&apos;,&apos;1602&apos;,&apos;1502&apos;,&apos;1601&apos;);</code></li>
</ul>
</li>
<li>dev<ul>
<li><code>update t_work_time twt set twt.begin_date=sysdate,twt.end_date= sysdate+2,twt.work_begin_time=to_char(sysdate+2/24/60,&apos;hh24:mi&apos;),twt.work_end_time=to_char(sysdate+12/24/60,&apos;hh24:mi&apos;),twt.rest_starttime =to_char(sysdate+5/24/60,&apos;hh24:mi&apos;),twt.rest_endtime =to_char(sysdate+10/24/60,&apos;hh24:mi&apos;)  where twt.bank_id in (select twt.bank_id from t_work_time twt left join t_bank tb on twt.bank_id = tb.id where tb.bank_code in (&apos;0601&apos;,&apos;0701&apos;,&apos;0732&apos;,&apos;0733&apos;,&apos;0734&apos;,&apos;0735&apos;,&apos;3401&apos;,&apos;4101&apos;));</code></li>
<li><code>select * from t_work_time  twt  left join t_bank tb on twt.bank_id=tb.id  where tb.bank_code in (&apos;0601&apos;,&apos;0701&apos;,&apos;0732&apos;,&apos;0733&apos;,&apos;0734&apos;,&apos;0735&apos;,&apos;3401&apos;,&apos;4101&apos;);</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="&#x4FEE;&#x6539;&#x5206;&#x6790;-ip-port">&#x4FEE;&#x6539;&#x5206;&#x6790; ip port</h2>
<ul>
<li><code>select * from t_facilities tf inner join t_bank tb on tf.bank_id=tb.id where tf.ip=&apos;192.168.1.31&apos; and tb.bank_code in (&apos;0501&apos;,&apos;0901&apos;,&apos;0401&apos;,&apos;1602&apos;,&apos;1502&apos;,&apos;1601&apos;);</code></li>
<li><code>select * from t_bank tb where tb.bank_code in (&apos;0501&apos;,&apos;0901&apos;,&apos;0401&apos;,&apos;1602&apos;,&apos;1502&apos;,&apos;1601&apos;);</code></li>
<li><code>select * from t_facilities tf where tf.ip=&apos;192.168.1.31&apos; for update</code></li>
<li><code>select tf.f_code, tf.ip , tf.port from t_facilities tf inner join t_bank tb on tf.bank_id=tb.id where tf.ip=&apos;192.168.1.31&apos; and tb.bank_code in (&apos;0401&apos;,&apos;0501&apos;,&apos;0901&apos;,&apos;1502&apos;,&apos;1601&apos;,&apos;1602&apos;)  for update</code></li>
</ul>
<h1 id="&#x4E00;&#x952E;&#x66F4;&#x65B0;&#x57FA;&#x672C;&#x9700;&#x6C42;">&#x4E00;&#x952E;&#x66F4;&#x65B0;&#x57FA;&#x672C;&#x9700;&#x6C42;</h1>
<h2 id="1-&#x5B89;&#x88C5;&#x4E3A;&#x670D;&#x52A1;">1. &#x5B89;&#x88C5;&#x4E3A;&#x670D;&#x52A1;</h2>
<ul>
<li>&#x5B9A;&#x65F6;&#x62C9;&#x53D6;,&#x76D1;&#x542C;&#x901A;&#x77E5;</li>
<li>curl(&#x4E0B;&#x8F7D;), msiexec(&#x5B89;&#x88C5;,&#x66F4;&#x65B0;),&#x542F;&#x52A8;,&#x5B89;&#x88C5;&#x65E5;&#x5FD7;&#x4E0A;&#x4F20;</li>
<li>&#x5F3A;&#x5236;&#x66F4;&#x65B0;</li>
<li>&#x65E5;&#x5FD7;&#x4E0A;&#x4F20;, db&#x8BB0;&#x5F55;</li>
</ul>
<h2 id="2-&#x5B89;&#x88C5;&#x5378;&#x8F7D;&#x7BA1;&#x7406;&#x5458;&#x6743;&#x9650;-&#x9759;&#x9ED8;">2. &#x5B89;&#x88C5;&#x5378;&#x8F7D;(&#x7BA1;&#x7406;&#x5458;&#x6743;&#x9650; &#x9759;&#x9ED8;)</h2>
<ul>
<li><code>msiexec /i analyseServer-x64-1.2.42.msi /qb /l+ install.log</code></li>
<li><code>msiexec /i analyseServer-x64-1.2.42.msi /qr /l+ install.log</code></li>
<li><code>msiexec /i analyseServer-x64-1.2.42.msi /passive /l+ install.log</code></li>
<li><code>msiexec /x analyseServer-x64-1.2.42.msi /qb /l+ install.log</code></li>
<li><code>msiexec /x analyseServer-x64-1.2.42.msi /qr /l+ install.log</code></li>
<li><code>msiexec /x analyseServer-x64-1.2.42.msi /passive /l+ install.log</code></li>
</ul>
<h1 id="&#x5DE5;&#x5177;&#x548C;&#x5E93;">&#x5DE5;&#x5177;&#x548C;&#x5E93;</h1>
<h2 id="include&#x53BB;&#x91CD;">include&#x53BB;&#x91CD;</h2>
<ul>
<li><code>g++ -H  foo.C |&amp; awk &apos;{print $2}&apos; | sort | uniq -c | grep -v &apos;      1 &apos;</code></li>
</ul>
<h2 id="gogs">gogs</h2>
<ul>
<li>&#x4E0B;&#x8F7D; windows_amd64_mws.zip(&#x542B;&#x670D;&#x52A1;&#x6CE8;&#x518C;)</li>
<li><p>&#x7F16;&#x8F91;custom/conf/app.ini</p>
</li>
<li><p>mysql &#x5EFA;&#x8868;</p>
<ul>
<li><code>DROP DATABASE IF EXISTS gogs;</code><ul>
<li><code>CREATE DATABASE IF NOT EXISTS gogs CHARACTER SET utf8 COLLATE utf8_general_ci;</code></li>
</ul>
</li>
</ul>
</li>
<li><p>./gogs.exe web &#x542F;&#x52A8;&#x6210;&#x529F;&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x6B63;&#x5E38;</p>
</li>
<li>&#x6CE8;&#x518C;&#x6210;windows&#x670D;&#x52A1; <ul>
<li><code>sc create gogs start= auto binPath= &quot;&quot;C:\gogs\gogs.exe&quot; web --config &quot;C:\gogs\conf\app.ini&quot;&quot;</code></li>
</ul>
</li>
</ul>
<h2 id="json-&#x5E8F;&#x5217;&#x5316;">json &#x5E8F;&#x5217;&#x5316;</h2>
<ul>
<li><code>:%s/\(.*\)/j[&quot;\1&quot;] = data.\1;/g</code></li>
<li><code>:%s/\(.*\)/if (j.find(&quot;\1&quot;) != j.end())\r{\rdata.\1 = j[&quot;\1&quot;];\r}\r/g</code></li>
</ul>
<h1 id="&#x641C;&#x7D22;">&#x641C;&#x7D22;</h1>
<ol>
<li>taskid<ul>
<li>&#x53D1;&#x9001;&#x4FE1;&#x606F;:TaskID:.*thumbnail.jpg</li>
<li>&#x4EFB;&#x52A1; &#x7ED3;&#x679C;[&#x4E0A;&#x62A5;]    [alarm]:     taskID[</li>
<li>thumbnail.jpg</li>
</ul>
</li>
</ol>
<h1 id="&#x914D;&#x7F6E;&#x4FEE;&#x6539;">&#x914D;&#x7F6E;&#x4FEE;&#x6539;</h1>
<h2 id="&#x5185;&#x63A7;">&#x5185;&#x63A7;</h2>
<pre><code>D:\xampp\tomcat\webapps\iics\WEB-INF\classes\config.properties
    jdbc.url=jdbc:oracle:thin:@192.168.1.100:1521:BANK4
    jdbc.username=dev
    jdbc.password=dev321
    versionUrl=http://192.168.1.31:8080/doc/
    versionPath=E:\\zmy\\analyseServer\\analyseServer\\Release\\msi
    pushDataTime=60000
D:\xampp\tomcat\webapps\iics\WEB-INF\classes\spring-hibernate.xml
        &lt;property name=&quot;cronExpression&quot; value=&quot;0 53 12 * * ?&quot; /&gt;
</code></pre><h2 id="&#x6838;&#x5FC3;&#x6570;&#x636E;&#x63A8;&#x9001;">&#x6838;&#x5FC3;&#x6570;&#x636E;&#x63A8;&#x9001;</h2>
<ol>
<li>&#x6838;&#x5FC3;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x66F4;&#x540D;&#x4E3A; &#x5F53;&#x524D;&#x65E5;&#x671F;</li>
<li>&#x6838;&#x5FC3;&#x6570;&#x636E;&#x6587;&#x4EF6; &#x65E5;&#x671F;&#x66FF;&#x6362;&#x4E3A; &#x6628;&#x5929;&#x65E5;&#x671F;</li>
<li>&#x4FEE;&#x6539; tomcat &#x6587;&#x4EF6;config.properties &#x4E2D;&#x63A8;&#x9001;&#x65F6;&#x95F4;&#x4E3A;&#x89E3;&#x6790;&#x540E;&#x4E00;&#x5206;&#x949F; pushDataTime=60000</li>
<li>&#x4FEE;&#x6539; tomcat &#x6587;&#x4EF6;spring-hibernate.xml &#x4E2D; cronExpression &#x7684;value &#x4E3A; &#x5F53;&#x524D;&#x65F6;&#x95F4; &#x4E4B;&#x540E; &#x51E0;&#x5206;&#x949F;</li>
<li>&#x542F;&#x52A8; tomcat</li>
<li>&#x542F;&#x52A8; vaServer</li>
<li>&#x6E05;&#x7406; redis &#x6570;&#x636E; flushdatabase &#x6216;&#x8005; redis-cli flushall</li>
<li>&#x542F;&#x52A8; analyseServer</li>
</ol>
<h1 id="mkghsh">mkgh.sh</h1>
<pre><code>#! /usr/bin/bash
gitbook install &gt; /dev/null
gitbook init &gt; /dev/null &amp;&amp; gitbook build &gt; /dev/null
git add .
git commit -a -m &apos;build gh&apos;
git checkout gh-pages
git pull origin gh-pages --rebase
cp -R _book/* .
git add .
git commit -a -m &quot;update gh&quot;
git clean -fx _book
git push origin gh-pages
git checkout master
git clean -fx _book
git push
</code></pre><h1 id="rocksh">rock.sh</h1>
<pre><code>#! /usr/bin/bash
#   by walker

VERSION=&apos;v0.0.4 by walker&apos;
CURR_DIR=$(pwd)

### &#x5F85;&#x914D;&#x7F6E;
BANKCODE=( 0401 0501 0901 1502 1601 1602 )                                          # &#x673A;&#x6784;&#x7801; &#x5217;&#x8868;
MSI_DIR=&apos;/e/zmy/analyseServer/analyseServer/Release/msi&apos;                            # &#x5206;&#x6790;&#x670D;&#x52A1;&#x5668; &#x7248;&#x672C;&#x76EE;&#x5F55;&#xFF0C;&#x4F1A;&#x5B89;&#x88C5;&#x6700;&#x65B0;&#x7248;&#x672C;
TOMCAT=&apos;/d/xampp/tomcat/bin/startup.bat&apos;                                            # tomcat&#x542F;&#x52A8;&#x811A;&#x672C;
CONFIG_FILE=&apos;/d/xampp/tomcat/webapps/iics/WEB-INF/classes/spring-hibernate.xml&apos;     # &#x5185;&#x63A7;&#x914D;&#x7F6E; &#x4FEE;&#x6539; &#x6838;&#x5FC3;&#x6570;&#x636E;&#x89E3;&#x6790;&#x65F6;&#x95F4;(03 02 01) &#x4E3A; &#x5F53;&#x524D;&#x65F6;&#x95F4;2min&#x540E;
OLD_FILE=&apos;/d/2017-06-01.txt&apos;                                                        # &#x6838;&#x5FC3;&#x6570;&#x636E; &#x6587;&#x4EF6;
sleep_time=30                                                                                                                                           # 30sec&#x7B49;&#x5F85;                     (tomcat&#x5B8C;&#x5168;&#x542F;&#x52A8;)
parse_time=2                                                                                                                                            # 2min&#x540E;&#x89E3;&#x6790;&#x6838;&#x5FC3;&#x6570;&#x636E;    (tomcat&#x5B8C;&#x5168;&#x542F;&#x52A8;)
va_PORT=64000                                                                       # &#x7B97;&#x6CD5; &#x7AEF;&#x53E3;
notify_PORT=7900                                                                    # &#x5206;&#x6790;&#x670D;&#x52A1;&#x5668; &#x76D1;&#x542C;&#x7AEF;&#x53E3;(&#x5185;&#x63A7;&#x901A;&#x77E5;&#x7AEF;&#x53E3;)
HEARTBEAT=30                                                                        # &#x5FC3;&#x8DF3;&#x95F4;&#x9694;
URL=&apos;http://192.168.1.31:8080/inforunws/service/rest&apos;                               # &#x5185;&#x63A7;URL

### &#x4EE5;&#x4E0B; &#x4E0D;&#x8981;&#x4FEE;&#x6539;
MSI_FILE=$(cd $MSI_DIR &amp;&amp; ls -t *.msi|sed -n &apos;1p&apos;)                                  # &#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B; &#x6700;&#x65B0;msi
DATA_FILE=&quot;/d/&quot;$(date +%Y-%m-%d)&quot;.txt&quot;                                              # &#x751F;&#x6210;&#x65B0;&#x7684;&#x6838;&#x5FC3;&#x6570;&#x636E;
SRC_DIR=&apos;/c/Program Files/Inforun/analyseServer&apos;                                    # &#x5206;&#x6790;&#x670D;&#x52A1;&#x5668; &#x5B89;&#x88C5;&#x76EE;&#x5F55;
LOG_DIR=&apos;D:/Log&apos;                                                                    # &#x5206;&#x6790;&#x670D;&#x52A1;&#x5668; &#x65E5;&#x5FD7;&#x76EE;&#x5F55;
default_notify_PORT=7900                                                                                                                        # &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;
default_va_PORT=64000                                                                                                                           # &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;
redis_PORT=6379                                                                     # redis &#x7AEF;&#x53E3;

#############
function usage()
{
    cat &lt;&lt;EOF |GREP_COLOR=&apos;01;32&apos; grep --color=always .
Usage:
    ./rock.sh [op] [file]
    &#x5206;&#x6790;&#x670D;&#x52A1;&#x5668;&#x6D4B;&#x8BD5;&#x7528;&#x81EA;&#x52A8;&#x811A;&#x672C;[&#x5378;&#x8F7D;/&#x5B89;&#x88C5;/&#x4FEE;&#x6539;/&#x514B;&#x9686;/&#x90E8;&#x7F72;/&#x542F;&#x52A8;/&#x505C;&#x6B62;/&#x65E5;&#x5FD7;&#x5206;&#x6790;]
Op:
                &#x65E0;&#x53C2;&#x6570;&#x547D;&#x4EE4;[-h -m -s -t -a]
    -h          &#x663E;&#x793A;usage
    -V          &#x7248;&#x672C;&#x4FE1;&#x606F;
    -v          &#x66F4;&#x65B0;&#x7248;&#x672C;&#x65E5;&#x5FD7;
    -x          &#x65E5;&#x5FD7;&#x8FC7;&#x6EE4;
    [file]      &#x7EDF;&#x8BA1;&#x65E5;&#x5FD7;[file]
    -l          &#x7EDF;&#x8BA1;&#x65E5;&#x5FD7; (/d/log/*.rg.log)
    -ll         &#x76D1;&#x6D4B;&#x65E5;&#x5FD7;&#x7EDF;&#x8BA1; (/d/log/*.rg.log)
    -ls         &#x76D1;&#x6D4B;&#x5904;&#x7406;&#x901F;&#x5EA6; (cout/min)
    -e          &#x7EDF;&#x8BA1;&#x65E5;&#x5FD7;&#x9519;&#x8BEF;
    -n [msg]    &#x624B;&#x52A8;&#x901A;&#x77E5;&#x5206;&#x6790;(&#x6A21;&#x62DF;&#x5185;&#x63A7;, msg&#x9ED8;&#x8BA4;222)
    -1          &#x542F;&#x52A8;&#x6240;&#x6709;vaServer64
    -2          &#x542F;&#x52A8;&#x6240;&#x6709;analyserServer64
    -m          &#x4FEE;&#x6539;&#x914D;&#x7F6E;
    -s          &#x505C;&#x6B62;tomcat
    -t          &#x542F;&#x52A8;tomcat
    -a          &#x987A;&#x5E8F;&#x6267;&#x884C;&#x540E;&#x7EED;&#x547D;&#x4EE4;[-k -i -c -r -p]
    -k          &#x6740;&#x6B7B;&#x8FDB;&#x7A0B;
    -i          &#x5378;&#x8F7D;&#x5E76;&#x5B89;&#x88C5;
    -c          &#x514B;&#x9686;&#x526F;&#x672C; (mkcopy)
    -cc         &#x663E;&#x793A;&#x514B;&#x9686;&#x4FE1;&#x606F;
    -r          [-1 -2]
    -p          &#x5DF2;&#x542F;&#x52A8;&#x526F;&#x672C;&#x8FDB;&#x7A0B;&#xFF0C;TCP&#x8FDE;&#x63A5;&#x7AEF;&#x53E3;
EOF
}

function mkshow()
{
    echo -e &quot;&#x6240;&#x6709;bankcode \t[${BANKCODE[*]}]&quot;
    echo -e &quot;bankCode\t&#x7B97;&#x6CD5;&#x7AEF;&#x53E3;\t&#x5185;&#x63A7;&#x901A;&#x77E5;&#x7AEF;&#x53E3;\t&#x65E5;&#x5FD7;&#x8DEF;&#x5F84;&quot;
    COUNT=0
    for arg in ${BANKCODE[*]}
    do
        (( COUNT += 1 ))
        echo -e $arg&quot;\t\t&quot;$(($va_PORT + $COUNT))&quot;\t\t&quot;$(($notify_PORT + $COUNT))&quot;\t\t$LOG_DIR/$arg.rg.log&quot;
    done
}
function mkcopy()
{
    [ -d $LOG_DIR ] || mkdir -p $LOG_DIR
    [ -d build ] || mkdir -p build
    echo -e &quot;&#x6E90;&#x76EE;&#x5F55;:\t\t$SRC_DIR&quot;
    echo -e &quot;&#x65E5;&#x5FD7;&#x76EE;&#x5F55;&#xFF1A;\t$LOG_DIR&quot;
    echo -e &quot;&#x5FC3;&#x8DF3;&#x95F4;&#x9694;&#xFF1A;\t$HEARTBEAT&quot;&quot;s&quot;
    echo -e &quot;&#x5185;&#x63A7;&#x5730;&#x5740;&#xFF1A;\t$URL&quot;
    echo -e &quot;&#x6240;&#x6709;bankcode \t[${BANKCODE[*]}]&quot;
    echo -e &quot;bankCode\t&#x7B97;&#x6CD5;&#x7AEF;&#x53E3;\t&#x5185;&#x63A7;&#x901A;&#x77E5;&#x7AEF;&#x53E3;\t&#x65E5;&#x5FD7;&#x8DEF;&#x5F84;&quot;

    [ -d build ] &amp;&amp; rm -rf build/* || mkdir build
    COUNT=0
    for arg in ${BANKCODE[*]}
    do
        (( COUNT += 1 ))
        [ -d &quot;$SRC_DIR&quot; ] &amp;&amp; cp -R &quot;$SRC_DIR&quot; build/$arg
        sed -i &apos;s#\(.*\).path =.*#\1.path = &apos;$LOG_DIR&apos;/&apos;$arg&apos;.rg.log#&apos;                                                  build/$arg/log_rg.properties
        sed -i &apos;s#\(.*\).path =.*#\1.path = &apos;$LOG_DIR&apos;/&apos;$arg&apos;.va.log#&apos;                                                  build/$arg/log_va.properties
        sed -i &apos;s#&lt;port&gt;&apos;$default_va_PORT&apos;&lt;/port&gt;#&lt;port&gt;&apos;$(($va_PORT + $COUNT))&apos;&lt;/port&gt;#&apos;                               build/$arg/vaServer.xml
        sed -i &apos;s#&lt;port&gt;&apos;$default_va_PORT&apos;&lt;/port&gt;#&lt;port&gt;&apos;$(($va_PORT + $COUNT))&apos;&lt;/port&gt;#&apos;                               build/$arg/analyseServer64.xml
        sed -i &apos;s#&lt;port&gt;&apos;$default_notify_PORT&apos;&lt;/port&gt;#&lt;port&gt;&apos;$(($notify_PORT + $COUNT))&apos;&lt;/port&gt;#&apos;                       build/$arg/analyseServer64.xml
        sed -i &apos;s#&lt;bankCode&gt;.*&lt;/bankCode&gt;#&lt;bankCode&gt;&apos;$arg&apos;&lt;/bankCode&gt;#&apos;                                                 build/$arg/analyseServer64.xml
        sed -i &apos;s#&lt;url&gt;.*&lt;/url&gt;#&lt;url&gt;&apos;$URL&apos;&lt;/url&gt;#&apos;                                                                     build/$arg/analyseServer64.xml
        sed -i &apos;s#&lt;heartBeatInterval&gt;.*&lt;/heartBeatInterval&gt;#&lt;heartBeatInterval&gt;&apos;$HEARTBEAT&apos;&lt;/heartBeatInterval&gt;#gi&apos;     build/$arg/analyseServer64.xml
        sed -i &apos;s#&lt;heartbeatInterval&gt;.*&lt;/heartbeatInterval&gt;#&lt;heartbeatInterval&gt;&apos;$HEARTBEAT&apos;&lt;/heartbeatInterval&gt;#gi&apos;     build/$arg/vaServer.xml

        echo -e $arg&quot;\t\t&quot;$(($va_PORT + $COUNT))&quot;\t\t&quot;$(($notify_PORT + $COUNT))&quot;\t\t$LOG_DIR/$arg.rg.log&quot;
    done
}
function modconfig()
{
    TIME=$(date +%S&quot; &quot;%M&quot; &quot;%H --date=&quot;$parse_time minutes&quot;)
    TIME_ECHO=$(date +%X --date=&quot;$parse_time minutes&quot;)
    echo &apos;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&apos; $DATA_FILE|grep --color=always . &amp;&amp; cp $OLD_FILE $DATA_FILE &amp;&amp; sed -i &apos;s#|\(2017/[^|]*\)#|&apos;&quot;$(date +%Y/%m/%d --date=&apos;1 day ago&apos;)&quot;&apos;#&apos; $DATA_FILE &amp;&amp; sed -n &apos;1p&apos; $DATA_FILE
    echo &apos;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&apos; $CONFIG_FILE &apos;&#x6838;&#x5FC3;&#x6570;&#x636E;&#x89E3;&#x6790;&#x65F6;&#x95F4;:&apos; $TIME_ECHO &quot;(&quot;$parse_time &quot;min&#x4E4B;&#x540E;)&quot;|grep --color=always . &amp;&amp; ([ -f ${CONFIG_FILE}.bak ] &amp;&amp; [ $(grep -F &apos;property name=&quot;cronExpression&quot; value=&quot;03 02 01&apos; ${CONFIG_FILE}.bak|wc -l) == 1 ]) &amp;&amp; (cp $CONFIG_FILE{.bak,} &amp;&amp; sed -i &apos;s#\(property name=&quot;cronExpression&quot; value=&quot;\)\(03 02 01\)#\1&apos;&quot;$TIME&quot;&apos;#&apos; $CONFIG_FILE )|| ( ([  -f ${CONFIG_FILE}.bak ] &amp;&amp; rm -rf ${CONFIG_FILE}.bak)|( ISOK=$(grep -F &apos;property name=&quot;cronExpression&quot; value=&quot;03 02 01&apos; $CONFIG_FILE|wc -l) &amp;&amp; [ $ISOK ==  0 ] &amp;&amp; echo &quot;&#x811A;&#x672C;&#x65E0;&#x6CD5;&#x4FEE;&#x6539;&#x6587;&#x4EF6;[$CONFIG_FILE]:&#x68C0;&#x67E5;&#x5230; &#x6838;&#x5FC3;&#x6570;&#x636E;&#x89E3;&#x6790;&#x65F6;&#x95F4;&#x4E0D;&#x4E3A; 03 02 01&quot; || cp $CONFIG_FILE{,.bak} &amp;&amp; sed -i &apos;s#\(property name=&quot;cronExpression&quot; value=&quot;\)\(03 02 01\)#\1&apos;&quot;$TIME&quot;&apos;#&apos; $CONFIG_FILE) )
    grep --color=always -n &quot;$TIME&quot; $CONFIG_FILE{,}|sort|uniq
}
function print_info()
{
    echo &apos;&#x5DF2;&#x542F;&#x52A8;&#x526F;&#x672C;&#x8FDB;&#x7A0B;&apos; | grep --color=always . &amp;&amp; ps -ef |grep --color=always &apos;build.*64&apos;
    echo &apos;&#x901A;&#x77E5;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&apos; | grep --color=always . &amp;&amp; echo $notify_PORT|sed -n &apos;s#^\(..\).*#\1#p&apos;|xargs.exe -i grep --color=always &apos;\([[:digit:]]\{1,3\}\.\)\{3\}[[:digit:]]\{1,3\}:&apos;{} &lt;(netstat -abon|tr &quot;\n\r&quot; &quot; &quot;|sed &apos;s#TCP#\nTCP#g&apos;)
    echo &apos;&#x7B97;&#x6CD5;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&apos; | grep --color=always . &amp;&amp; echo $va_PORT|sed -n &apos;s#^\(..\).*#\1#p&apos;|xargs.exe -i grep --color=always &apos;\([[:digit:]]\{1,3\}\.\)\{3\}[[:digit:]]\{1,3\}:&apos;{} &lt;(netstat -abon|tr &quot;\n\r&quot; &quot; &quot;|sed &apos;s#TCP#\nTCP#g&apos;)
    echo &apos;redis&#x670D;&#x52A1;&#x7AEF;&#x53E3;&apos; | grep --color=always . &amp;&amp; echo $redis_PORT|xargs.exe -i grep --color=always &apos;\([[:digit:]]\{1,3\}\.\)\{3\}[[:digit:]]\{1,3\}:&apos;{} &lt;(netstat -abon|tr &quot;\n\r&quot; &quot; &quot;|sed &apos;s#TCP#\nTCP#g&apos;)
}
function notify()
{
    [ $# != 1 ] &amp;&amp; exit
    COUNT_notify=0
    echo &apos;&#x624B;&#x52A8;&#x901A;&#x77E5;&#x5206;&#x6790;&apos; | grep --color=always .
    for arg in ${BANKCODE[*]}
    do
        (( COUNT_notify += 1 ))
        echo &apos;{&quot;messageType&quot;:&quot;&apos;$1&apos;&quot;}&apos; localhost:&quot;$(($notify_PORT + $COUNT_notify))&quot;
        #echo &apos;{&quot;messageType&quot;:&apos;$1&apos;}&apos;|nc localhost $(($notify_PORT + $COUNT_notify))
        echo &apos;{&quot;messageType&quot;:&quot;&apos;$1&apos;&quot;}&apos;|socat - TCP:localhost:$(($notify_PORT + $COUNT_notify))
    done
}
function version()
{
    ( cd /e/zmy/analyseServer/analyseServer/Release;
    ver_old=$(git tag|sort -rn|sed -n &apos;1p&apos;); ver_new=$(grep PRODUCT ../analyseServer/version.h|sed &apos;s/[^&quot;]*&quot;//;s/&quot;//&apos;);
    [ $ver_old == $ver_new ] &amp;&amp; (echo &#x6CA1;&#x6709;&#x589E;&#x52A0;&#x7248;&#x672C;&#x53F7; $ver_new|GREP_COLOR=&apos;03;36&apos; grep --color=always .) ||
    (
    cp &#x53D1;&#x5E03;&#x65E5;&#x5FD7;.md{,.bak};
    new_log=$(echo &quot;##### $ver_new [$(date +%Y-%m-%d)]&quot; &amp;&amp; git log &quot;$ver_old&quot;.. --oneline |grep -v &apos;Merge&apos;|grep -v $ver_new|sed &apos;s/[^ ]* //;s/[0-9]*\. /\n/g&apos;|grep -v &apos;^$&apos;|cat -n -|sed &apos;s/^\([ 0-9]*\)\(.*\)/\1.\2/;s/\t/ /g&apos;)
    echo &quot;$new_log&quot;
    cat  &lt;(cat &#x53D1;&#x5E03;&#x65E5;&#x5FD7;.md|sed -n &apos;1,2p&apos;) &lt;(echo &quot;$new_log&quot;) &lt;(cat &#x53D1;&#x5E03;&#x65E5;&#x5FD7;.md|sed -n &apos;3,$p&apos;) &gt; &#x53D1;&#x5E03;&#x65E5;&#x5FD7;.md.bak;
    mv &#x53D1;&#x5E03;&#x65E5;&#x5FD7;.md{.bak,}) )
}
function loop()
{
    while true; do $0 $1;echo &quot;=========================================&quot;|GREP_COLOR=&apos;03;36&apos; grep --color=always .; sleep 3;done
}
[ $# == 0 ] &amp;&amp; $0 -h -k -s -m -t -a &amp;&amp; exit

until [ -z &quot;$1&quot; ]
do
    [ -f &quot;$1&quot; ] &amp;&amp; (echo &apos;&#x65E5;&#x5FD7;&#x7EDF;&#x8BA1;&apos; $1|GREP_COLOR=&apos;01;32&apos; grep --color=always . &amp;&amp; grep -E &apos;waiting|&#x63A8;&#x9001;|&#x6570;&#x636E;|&#x4E0A;&#x4F20;|&#x7F13;&#x5B58;|&#x4EFB;&#x52A1;|&#x62A5;&#x8B66;|&#x8BA1;&#x5212;&apos; &quot;$1&quot;|awk -F# &apos;{print $2}&apos;|sort|uniq -c|grep --color=always -E &apos;waiting|&#x63A8;&#x9001;|&#x6570;&#x636E;|&#x4E0A;&#x4F20;|&#x7F13;&#x5B58;|&#x4EFB;&#x52A1;|&#x62A5;&#x8B66;|&#x8BA1;&#x5212;&apos; &amp;&amp; grep  &apos;\[E\]&apos; &quot;$1&quot;|awk -F# &apos;{print $2}&apos;|sort|uniq -c|GREP_COLOR=&apos;01;33&apos; grep --color=always -E .)

    [ &quot;$1&quot; == &quot;-ll&quot; ] &amp;&amp; (echo &apos;&#x76D1;&#x6D4B;&#x65E5;&#x5FD7;&#x7EDF;&#x8BA1;&apos;|grep --color=always . &amp;&amp; loop -l)
    [ &quot;$1&quot; == &quot;-ls&quot; ] &amp;&amp; (echo &apos;&#x76D1;&#x6D4B;&#x5904;&#x7406;&#x901F;&#x5EA6;&apos; &quot;count/min(SMsgVATaskEndNotify)&quot;|grep --color=always . &amp;&amp; loop --stat)
    [ &quot;$1&quot; == &quot;-le&quot; ] &amp;&amp; (echo &apos;&#x76D1;&#x6D4B;&#x65E5;&#x5FD7;&#x9519;&#x8BEF;&apos; | grep --color=always . &amp;&amp; loop -e)
    [ &quot;$1&quot; == &quot;-cc&quot; ] &amp;&amp; (echo &apos;&#x663E;&#x793A;&#x514B;&#x9686;&#x4FE1;&#x606F;&apos; | grep --color=always . &amp;&amp; mkshow)

    [ &quot;$1&quot; == &quot;-l&quot; ] &amp;&amp; ($0 /d/log/*.rg.log)
    [ &quot;$1&quot; == &quot;--stat&quot; ] &amp;&amp; (for line in /d/log/*.rg.log; do echo -e $line|grep --color=always . ;time=$(grep -E &apos;&#x6D88;&#x606F; &#x5904;&#x7406;\[&#x4EFB;&#x52A1;\]\[struct SMsgVATaskEndNotify&apos; $line|sed -n &apos;1p;$p&apos;|sed &apos;s/\]\[.*$//g;s/\[//g&apos;|xargs.exe -i date --date=&apos;{}&apos; +%s|tr &quot;\n&quot; &quot;-&quot;|sed &apos;s/^/(0-(/;s#-$#))#;s/$/\n/&apos;|bc);count=$(grep -cE &apos;&#x6D88;&#x606F; &#x5904;&#x7406;\[&#x4EFB;&#x52A1;\]\[struct SMsgVATaskEndNotify&apos; $line);speed=$(echo &quot;(&quot;$count&quot;-1)*60/&quot;$time|bc);echo &quot;(&quot;$count&quot;-1)*60/&quot;$time&quot;=&quot;$speed;done;)
    [ &quot;$1&quot; == &quot;-e&quot; ] &amp;&amp; (grep --color=always -n &apos;\[E\]&apos; /d/log/*.rg.log|sed &apos;s/:.*:.*#/#/g&apos;|sed &apos;s/&#x5931;&#x8D25;:.*/&#x5931;&#x8D25;:/g;s/id:.*/id:/g&apos;|sort|uniq -c| GREP_COLOR=&apos;01;32&apos; grep --color=always &apos;#.*&apos;;)
    [ &quot;$1&quot; == &quot;-a&quot; ] &amp;&amp; ($0 -k -i -c -r -p)
    [ &quot;$1&quot; == &quot;-r&quot; ] &amp;&amp; ($0 -1; echo &apos;&#x7B49;&#x5F85;&#x542F;&#x52A8; 5 sec&apos;|grep --color=always . &amp;&amp; sleep 5; $0 -2)
    [ &quot;$1&quot; == &quot;-h&quot; ] &amp;&amp; (echo &apos;&#x6302;&#x8F7D;&#x4FE1;&#x606F;&apos; | grep --color=always . &amp;&amp; df -h &amp;&amp; usage)
    [ &quot;$1&quot; == &quot;-n&quot; ] &amp;&amp; ([ $# == 2 ] &amp;&amp; notify $2 &amp;&amp; exit || notify 222 &amp;&amp; exit)
    [ &quot;$1&quot; == &quot;-m&quot; ] &amp;&amp; modconfig
    [ &quot;$1&quot; == &quot;-p&quot; ] &amp;&amp; print_info
    [ &quot;$1&quot; == &quot;-V&quot; ] &amp;&amp; (echo -e &apos;rock&apos; $VERSION | GREP_COLOR=&apos;01;36&apos; grep --color=always .)
    [ &quot;$1&quot; == &quot;-v&quot; ] &amp;&amp; version

    [ &quot;$1&quot; == &quot;-s&quot; ] &amp;&amp; (echo &apos;&#x505C;&#x6B62;tomcat&apos; | grep --color=always . &amp;&amp; eval $(tasklist.exe |grep -ia &apos;java.exe&apos;|awk &apos;{print &quot;-PID &quot;$2}&apos;|tr &quot;\n&quot; &quot; &quot; |xargs.exe -i echo {}|sed &apos;s/^/taskkill -F /&apos;))
    [ &quot;$1&quot; == &quot;-t&quot; ] &amp;&amp; (echo &quot;&#x542F;&#x52A8;tomcat&quot;| grep --color=always . &amp;&amp; $TOMCAT) &amp;&amp; (echo &quot;&#x7B49;&#x5F85;tomcat&#x5B8C;&#x5168;&#x542F;&#x52A8;(&quot;$sleep_time&quot; sec)&quot;| grep --color=always . &amp;&amp; sleep $sleep_time )
    [ &quot;$1&quot; == &quot;-k&quot; ] &amp;&amp; (echo &apos;&#x6740;&#x6B7B;&#x8FDB;&#x7A0B;[vaServer64 &amp; analyserServer64]&apos;| grep --color=always . &amp;&amp; eval $(tasklist.exe |grep -ia er64.exe|awk &apos;{print &quot;-PID &quot;$2}&apos;|tr &quot;\n&quot; &quot; &quot; |xargs.exe -i echo {}|sed &apos;s/^/taskkill -F /&apos;))
    [ &quot;$1&quot; == &quot;-i&quot; ] &amp;&amp; (echo &apos;&#x5378;&#x8F7D;&#x5E76;&#x5B89;&#x88C5;[&apos;$MSI_DIR&quot;/&quot;$MSI_FILE&apos;]&apos;| grep --color=always . &amp;&amp; (msiexec.exe -q -x $(reg query &quot;HKLM\SOFTWARE\Inforun\analyseServer&quot;|grep ProductCode|awk &apos;{print $3}&apos;) &amp;&gt; /dev/null );(cd $MSI_DIR &amp;&amp; msiexec.exe -q -i $MSI_FILE) )
    [ &quot;$1&quot; == &quot;-c&quot; ] &amp;&amp; (echo &apos;&#x514B;&#x9686;&#x526F;&#x672C;&apos; | grep --color=always . &amp;&amp; mkcopy)
    [ &quot;$1&quot; == &quot;-1&quot; ] &amp;&amp; (echo &apos;&#x542F;&#x52A8;&#x6240;&#x6709;vaServer64&apos; | grep --color=always . &amp;&amp; eval $(find . -name &apos;vaServer64.exe&apos;|sed &apos;s#/[^/]*$##;s/\.//;s#^#(cd &apos;\&apos;&quot;$CURR_DIR&quot;\&apos;&apos;#g;s#$# \&amp;\&amp; ./vaServer64.exe \&amp;&gt; /dev/null \&amp;)#&apos;|tr &quot;\n&quot; &quot; &quot;|sed &apos;s#) (#) \&amp;\&amp; (#g&apos;) )
    [ &quot;$1&quot; == &quot;-2&quot; ] &amp;&amp; (echo &apos;&#x542F;&#x52A8;&#x6240;&#x6709;analyserServer64&apos; | grep --color=always . &amp;&amp; eval $(find . -name &apos;analyseServer64.exe&apos;|sed &apos;s#/[^/]*$##;s/\.//;s#^#(cd &apos;\&apos;&quot;$CURR_DIR&quot;\&apos;&apos;#g;s#$# \&amp;\&amp; ./analyseServer64.exe \&amp;&gt; /dev/null \&amp;)#&apos;|tr &quot;\n&quot; &quot; &quot;|sed &apos;s#) (#) \&amp;\&amp; (#g&apos;))

    [ &quot;$1&quot; == &quot;-x&quot; ] &amp;&amp; [ &quot;$1&quot; == &quot;-x&quot; ] &amp;&amp; (echo &apos;&#x8FC7;&#x6EE4;:&apos; $2| grep --color=always . &amp;&amp; WORD=$(echo $2|sed &apos;s/\[/\\\[/g;s/\]/\\\]/g&apos;) &amp;&amp; (for line in /d/log/*.rg.log; do echo $line|grep --color=always .;grep --color=always -E &apos;&apos;&quot;$WORD&quot;&apos;&apos; $line|awk -F# &apos;{print $2}&apos;|sort|uniq -c;done;))

    shift
done
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="todo.html" class="navigation navigation-prev " aria-label="Previous page: Todo">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="code.html" class="navigation navigation-next " aria-label="Next page: code">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"work","level":"1.3","depth":1,"next":{"title":"code","level":"1.4","depth":1,"path":"code.md","ref":"code.md","articles":[]},"previous":{"title":"Todo","level":"1.2","depth":1,"path":"todo.md","ref":"todo.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"work.md","mtime":"2017-09-26T06:30:58.632Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-10-10T05:08:19.642Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

